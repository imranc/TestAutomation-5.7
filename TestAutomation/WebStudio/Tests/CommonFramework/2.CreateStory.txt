*** Settings ***

Documentation  A test case to Create story and relate content in CUE

Resource       common_resource.txt


*** Test Cases ***

Login to CUE
    Login To CUE
    
Create picture and relate that to a story
    Create Picture Content  Image content created by automated tests
    Publish Picture
    Create Story  This is an Automated story For Common Framework
    Click Element  xpath=//div[contains(@class, "new-story")]//span[text()="General info"]
    Click Element  xpath=//div[contains(@class, "new-story")]//span[text()="Section"]
    Click Element  xpath=//div[contains(@class, "new-story")]//span[text()="Authors"]
    Drag And Drop With Sikuli  ImageContentTab  RelatedContentDropZone
    Click Element  css=div.tab.new-story
    Publish Story
    Click Element  xpath=//div[contains(@class, "new-story")]//span[text()="General info"]
    Click Element  css=div.tab.picture>div.close
    Wait Until Element Is Visible  css=div[ng-if="vm.content.links && vm.content.links['alternate']"]>div[class="right"]  15
    ${previewUrl}=  Get Element Attribute  css=a[ng-href*="http"]@ng-href
    Log Off From CUE
    Close Browser
    Open Browser  ${previewUrl}  ${BROWSER}
    Maximize Browser Window
    Wait Until Element Is Visible  css=img[src*="Image-content-created-by-automated-tests"]
    Page Should Contain Element  css=img[src*="Image-content-created-by-automated-tests"]
    Close Browser