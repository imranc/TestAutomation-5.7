*** Settings ***

Documentation  A test case to Create story and relate content in CUE

Resource       common_resource.txt


*** Test Cases ***

Login to CUE
    Login To CUE
    
Create Story
    Switch To CUE
    Create Picture Content  Image content created by automated tests
    Publish Picture
    Create Story  This is an Automated story For Common Framework
    Drag And Drop With Sikuli  ImageContentTab  RelatedContentDropZone
    Click Element  css=div.tab.new-story
    Publish Story
    Click Element  css=div.tab.picture>div.close
    Wait Until Element Is Visible  css=cf-metadata-row[ng-if="vm.content.links && vm.content.links['alternate']"]  15
    ${previewUrl}=  Get Element Attribute  css=a[ng-href*="http"]@ng-href
    Log Off From CUE
    Close Browser
    Open Browser  ${previewUrl}  ${BROWSER}
    Maximize Browser Window
    Wait Until Element Is Visible  css=img[src*="Image-content-created-by-automated-tests"]
    Page Should Contain Element  css=img[src*="Image-content-created-by-automated-tests"]
    Close Browser

