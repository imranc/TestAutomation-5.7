*** Settings ***

Documentation  A test case to check removing relations and picking relations from asset picker

Resource       common_resource.txt

*** Test Cases ***

Remove relation from an article
    Login To CUE
    Search in CUE  This is an Automated story For Common Framework
    Click Element  css=span.story
    Wait Until Angular Ready   15s
    Page Should Contain Button  css=input[id="save"]
    Click Element  xpath=//div[contains(@class, "story")]//span[text()="General info"]
    Click Element  xpath=//div[contains(@class, "story")]//span[text()="Section"]
    Click Element  xpath=//div[contains(@class, "story")]//span[text()="Authors"]
    Click Element  xpath=//label[contains(text(),"Related")]/..//button[@title="Remove"]
    Click Element  xpath=//div[contains(@class, "story")]//span[text()="General info"]
    Click Button  css=div[class*="story"]>div>div>div>div:nth-child(2)>input#publish
    Watch Preview
    Wait Until Page Contains  This is an Automated story For Common Framework
    Page Should not Contain Element  css=img[src*="Image-content-created-by-automated-tests"]
    Close Browser


Relate Content from Asset picker
    Login To CUE
    Search in CUE  This is an Automated story For Common Framework
    Click Element  css=span.story
    Wait Until Angular Ready   15s
    Page Should Contain Button  css=input[id="save"]
    Click Element  xpath=//div[contains(@class, "story")]//span[text()="General info"]
    Click Element  xpath=//div[contains(@class, "story")]//span[text()="Section"]
    Click Element  xpath=//div[contains(@class, "story")]//span[text()="Authors"]
    Page Should not Contain Element  xpath=//label[contains(text(),"Related")]/..//button[@title="Remove"]
    Click Element  xpath=//label[contains(text(),"Related")]/../button[contains(@class, 'add')]
    Wait Until Element is Visible  css=input.assetpicker-searchfield
    Input Text  css=input.assetpicker-searchfield  Image content created by automated tests
    Click Element  css=#picker .result .ng-scope
    Click Element  css=button[ng-click="vm.add()"]
    Click Element  xpath=//div[contains(@class, "story")]//span[text()="General info"]
    Click Button  css=div[class*="story"]>div>div>div>div:nth-child(2)>input#publish
    Wait Until Angular Ready   15s
    Wait Until Page Contains Element  xpath=//div//span[contains(text(), 'Published')]  15
    Watch Preview
    Wait Until Page Contains  This is an Automated story For Common Framework
    Page Should Contain Element  css=img[src*="Image-content-created-by-automated-tests"]
    Close Browser
    Close All Browsers